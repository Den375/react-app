{"version":3,"sources":["components/common/Paginator/Paginator.module.css","components/Users/User.module.css","components/common/Paginator/Paginator.js","components/Users/User.js","components/Users/Users.jsx","../node_modules/reselect/es/index.js","redux/users-selectors.js","components/Users/UsersContainer.jsx"],"names":["module","exports","currentPage","userContainer","class1","class2","Paginator","props","pagesCount","Math","ceil","totalUsersCount","pageSize","pages","i","push","react_default","a","createElement","map","p","className","s","onClick","onPageChanged","User","_ref","user","isAuth","followingInProgress","unfollow","follow","NavLink","to","id","src","photos","small","userDefPhoto","alt","followed","disabled","some","name","Users","Paginator_Paginator","users","u","Users_User","key","defaultEqualityCheck","b","createSelector","memoize","_len","arguments","length","memoizeOptions","Array","_key","_len2","funcs","_key2","recomputations","resultFunc","pop","dependencies","isArray","every","dep","dependencyTypes","join","Error","getDependencies","memoizedResultFunc","apply","undefined","concat","selector","params","resetRecomputations","createSelectorCreator","func","equalityCheck","lastArgs","lastResult","prev","next","areArgumentsShallowlyEqual","getUsers","state","usersPage","filter","getCurrentPage","getPageSize","getTotalUsersCount","getIsFetching","isFetching","getFollowingInProgress","getIsAuth","auth","UsersContainer","_this","setCurrentPage","requestUsers","this","Fragment","Preloader","components_Users_Users","React","Component","compose","connect"],"mappings":"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","file":"static/js/1.b42e33b0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"currentPage\":\"Paginator_currentPage__2yj7H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userContainer\":\"User_userContainer__2lnzq\",\"class1\":\"User_class1__3sL6m\",\"class2\":\"User_class2__1bS0d\"};","import React from \"react\";\r\nimport s from \"./Paginator.module.css\";\r\n\r\nexport const Paginator = props => {\r\n    let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize)\r\n    if (pagesCount > 20) {pagesCount = 20}\r\n    let pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n\r\n    return <div>\r\n            {pages.map( p => {\r\n                return <span className={props.currentPage === p ? s.currentPage : null}\r\n                             onClick={() => props.onPageChanged(p)}> {p} </span>\r\n            })}\r\n         </div>\r\n}\r\n\r\n","import s from \"./User.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport userDefPhoto from \"../../assets/images/defaultAvatar.jpg\";\r\nimport React from \"react\";\r\n\r\nconst User = ({user, isAuth, followingInProgress, unfollow, follow}) => {\r\n    return <div className={s.userContainer} >\r\n        <div className={s.class1}>\r\n            <div>\r\n                <NavLink to={'/profile/' + user.id} >\r\n                    <img src={user.photos.small || userDefPhoto} alt=\"photo\"/>\r\n                </NavLink>\r\n            </div>\r\n            <div>\r\n                {!isAuth ? null  :\r\n                    user.followed\r\n                        ? <button  disabled={followingInProgress.some(id => id === user.id)}\r\n                                   onClick={() => {unfollow(user.id)}}>Unfollow</button>\r\n                        : <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                  onClick={() => {follow(user.id)}}>Follow</button>}\r\n            </div>\r\n        </div>\r\n        <div className={s.class2}>\r\n            <div>{user.name}</div>\r\n            <div>{'u.location.city'}</div>\r\n            <div></div>\r\n            <div></div>\r\n            <div>{'u.status'}</div>\r\n            <div>{'u.location.country'}</div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default User;","import React from \"react\";\r\nimport {Paginator} from \"../common/Paginator/Paginator\";\r\nimport User from \"./User\";\r\n\r\nlet Users = (props) => {\r\n        return <div>\r\n                  <Paginator totalUsersCount={props.totalUsersCount}\r\n                       pageSize={props.pageSize}\r\n                       currentPage={props.currentPage}\r\n                       onPageChanged={props.onPageChanged}/>\r\n                  <div>\r\n                    {props.users.map(u => <User user={u} key={u.id} isAuth={props.isAuth}\r\n                                        followingInProgress={props.followingInProgress}\r\n                                        unfollow={props.unfollow} follow={props.follow}/>)}\r\n                  </div>\r\n               </div>\r\n}\r\n\r\nexport default Users;\r\n\r\n","function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n  var length = prev.length;\n\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n  var lastArgs = null;\n  var lastResult = null; // we reference arguments instead of spreading them for performance reasons\n\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n\n      return memoizedResultFunc.apply(null, params);\n    });\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n\n    selector.recomputations = function () {\n      return recomputations;\n    };\n\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n\n    return selector;\n  };\n}\nexport var createSelector = createSelectorCreator(defaultMemoize);\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import {createSelector} from \"reselect\";\r\n// зависимость\r\nconst getUsersSelector = (state) => {\r\n    return state.usersPage.users\r\n}\r\n\r\nexport const getUsers = createSelector(getUsersSelector, (users) => {\r\n    return users.filter(u => true)\r\n})\r\n\r\n\r\nexport const getCurrentPage = (state) => {\r\n    return state.usersPage.currentPage\r\n}\r\n\r\nexport const getPageSize = (state) => {\r\n    return state.usersPage.pageSize\r\n}\r\n\r\nexport const getTotalUsersCount = (state) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\n\r\nexport const getIsFetching = (state) => {\r\n    return state.usersPage.isFetching\r\n}\r\n\r\nexport const getFollowingInProgress = (state) => {\r\n    return state.usersPage.followingInProgress\r\n}\r\n\r\nexport const getIsAuth = (state) => {\r\n    return state.auth.isAuth\r\n}","import Users from \"./Users\";\r\nimport {connect} from \"react-redux\";\r\nimport {requestUsers, setCurrentPage, follow, unfollow} from \"../../redux/users-reducer\";\r\nimport React from \"react\";\r\nimport Preloader from \"../common/preloader/Preloader\";\r\nimport {compose} from \"redux\";\r\nimport {\r\n    getCurrentPage,\r\n    getIsFetching,\r\n    getFollowingInProgress,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsers,\r\n    getIsAuth\r\n} from \"../../redux/users-selectors\";\r\n\r\nclass UsersContainer extends React.Component {\r\n\r\n    componentDidMount() {\r\n        this.props.requestUsers(this.props.currentPage, this.props.pageSize)\r\n    }\r\n\r\n\r\n    onPageChanged = (p) => {\r\n        this.props.setCurrentPage(p)\r\n        this.props.requestUsers(p, this.props.pageSize)\r\n    }\r\n\r\n    render() {\r\n        return <>\r\n                 {this.props.isFetching ? <Preloader/> : null}\r\n                 <Users totalUsersCount={this.props.totalUsersCount}\r\n                         pageSize={this.props.pageSize}\r\n                         currentPage={this.props.currentPage}\r\n                         users={this.props.users}\r\n                         onPageChanged={this.onPageChanged}\r\n                         unfollow={this.props.unfollow}\r\n                         follow={this.props.follow}\r\n                         followingInProgress={this.props.followingInProgress}\r\n                         isAuth={this.props.isAuth}\r\n                 />\r\n               </>\r\n    }\r\n}\r\n\r\n/*const mapStateToProps = (state) => {\r\n        return {\r\n            users: state.usersPage.users,\r\n            currentPage: state.usersPage.currentPage,\r\n            pageSize: state.usersPage.pageSize,\r\n            totalUsersCount: state.usersPage.totalUsersCount,\r\n            isFetching: state.usersPage.isFetching,\r\n            isFollowingProgress: state.usersPage.isFollowingProgress,\r\n        }\r\n    }*/\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        users: getUsers(state),\r\n        currentPage: getCurrentPage(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        isFetching: getIsFetching(state),\r\n        followingInProgress: getFollowingInProgress(state),\r\n        isAuth: getIsAuth(state)\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, { requestUsers, setCurrentPage, follow, unfollow}),\r\n    /*withAuthRedirect*/\r\n)(UsersContainer)\r\n\r\n\r\n/*const AuthRedirect = withAuthRedirect(UsersContainer)\r\n\r\nexport default connect(mapStateToProps, {\r\n    getUsers,\r\n    setCurrentPage,\r\n    follow,\r\n    unfollow\r\n})(AuthRedirect)*/\r\n\r\n\r\n/*const mapDispatchToProps = (dispatch) => {\r\n        return {\r\n            getUsers: (currentPage, pageSize) => {\r\n                dispatch(gerUsersThunkCreator(currentPage, pageSize))\r\n            },\r\n            follow: (userID) => {\r\n                dispatch(followAC(userID))\r\n            },\r\n            unFollow: (userID) => {\r\n                dispatch(unFollowAC(userID))\r\n            },\r\n            setUsers: (users) => {\r\n                dispatch(setUsersAC(users))\r\n            },\r\n            setCurrentPage: (pageNumber) => {\r\n                dispatch(setCurrentPageAC(pageNumber))\r\n            },\r\n            setTotalUsersCount: (totalUsersCount) => {\r\n                dispatch(setTotalUsersCountAC(totalUsersCount))\r\n            },\r\n            toggleIsFetching: (isFetching) => {\r\n                dispatch(toggleIsFetchingAC(isFetching))\r\n            }\r\n        }\r\n    }*/\r\n"],"sourceRoot":""}